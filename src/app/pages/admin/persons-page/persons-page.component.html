<div class="container">

    <div class="header">
        <h1>Users</h1>
    </div>


    <div class="P-search-block">

        <mat-form-field appearance="outline">
            <mat-label>Search</mat-label>
            <input matInput [value]="searchTerm()" (input)="updateSearchTerm($event)" placeholder="Search by Name or Email" />
        </mat-form-field>

    </div>


    <div class="mat-elevation-z8 G-table">
        <table mat-table [dataSource]="paginatedPersons()">

            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef class="G-short">ID</th>
                <td mat-cell *matCellDef="let element" class="G-short">{{ element.id }}</td>
            </ng-container>

            <ng-container matColumnDef="firstname">
                <th mat-header-cell *matHeaderCellDef (click)="onSortChange('firstname')">
                  First Name 
                  <ng-container *ngIf="sortColumn() === 'firstname' && sortDirection().firstname === 'asc'">⬇</ng-container>
                  <ng-container *ngIf="sortColumn() === 'firstname' && sortDirection().firstname === 'desc'">⬆</ng-container>
                  <ng-container *ngIf="sortColumn() !== 'firstname'">
                    ⬆⬇
                  </ng-container>
              
                </th>
                <td mat-cell *matCellDef="let person"> {{ person.firstname }} </td>
              </ng-container>

            <ng-container matColumnDef="lastname">
                <th mat-header-cell *matHeaderCellDef>Last Name</th>
                <td mat-cell *matCellDef="let element">{{ element.lastname }}</td>
            </ng-container>

            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef>Email</th>
                <td mat-cell *matCellDef="let element">{{ element.email }}</td>
            </ng-container>

            <ng-container matColumnDef="phone">
                <th mat-header-cell *matHeaderCellDef (click)="onSortChange('phone')">
                  Phone 
                  <ng-container *ngIf="sortColumn() === 'phone' && sortDirection().phone === 'asc'">⬇</ng-container>
                  <ng-container *ngIf="sortColumn() === 'phone' && sortDirection().phone === 'desc'">⬆</ng-container>
                  <ng-container *ngIf="sortColumn() !== 'phone'">
                    ⬆⬇
                  </ng-container>
                </th>
                <td mat-cell *matCellDef="let person"> {{ person.phone }} </td>
              </ng-container>

            <ng-container matColumnDef="website">
                <th mat-header-cell *matHeaderCellDef> Website </th>
                <td mat-cell *matCellDef="let person">
                    <a [href]="person.website" target="_blank" rel="noopener noreferrer">
                        {{ person.website }}
                    </a>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

    </div>

    <app-pagination [total]="totalItems" [currentPage]="currentPage" [itemsPerPage]="takeCount"></app-pagination>
</div>